// Define parameters that will be accessible in nextflow pipeline script
params {
    //projectName 
    projectName = "training_dataset_project"
    //qiime input parameters
    inmanifest = "${baseDir}/training_dataset/q2_manifest"
    inmetadata = "${baseDir}/training_dataset/q2_metadata"
    outdir = "/PATH-TO/$projectName"

    //Outputs steps directory names
    report_dirname = "00_report"
    steps_data = "steps_data"
    prepare_inputs_dirname = "${steps_data}/00_prepare_inputs"
    data_integrity_dirname = "${steps_data}/01_data_integrity"
    import_dirname = "${steps_data}/02_import"
    trimmed_dirname ="${steps_data}/03_trimmed"
    dada2_dirname = "${steps_data}/04_dada2"
    taxo_dirname = "${steps_data}/05_taxo"
    phylogeny_dirname = "${steps_data}/06_phylogeny" 
    stats_dirname = "${steps_data}/07_statistical_analysis"
  
    //Steps to activate or deactivate
    prepare_inputs_enable = true
    data_integrity_enable = true
    qiime_import_enable = true
    cutadapt_enable = true
    dada2_enable = true
    taxo_enable = true
    phylogeny_enable = true
    prepare_data_for_stats_enable = true
    stats_alpha_enable = true
    stats_beta_enable = true
    //STATS ONLY : set stats_only to true if you already have your ASV table
    stats_only = false
    //input asv table path to set if stats_only=true
    inasv_table = "/PATH-TO/ASV_table.tsv"
    newick = "/PATH-TO/tree.nwk"

    //tools environment bash script to load before execution
    //we advise to create a env.sh file containing the activation of tool conda environment
    qiime_env = ". ${baseDir}/config/conda_envs/qiime2_env.sh"
    r_stats_env = ". ${baseDir}/config/conda_envs/R_env.sh"

    //data integrity parameters
    data_integrity {
        //add your primer sequences and replace wildcard in the primer sequence by .
        primerF = "GTGCCAGC.GCCGCGGTA"
        primerR = "GACTAC.....T.TCTAAT"
        //columns' names in manifest file
        sampleid_column_name = "sample-id"
        R1_files_column_name = "forward-absolute-filepath"
        R2_files_column_name = "reverse-absolute-filepath"
        //columns' names in metadata file
        barcode_column_name = "barcode"
        //barcode minimum pourcentage filter to validate data
        barcode_filter = "90"
        //primer minimum pourcentage filter to validate data
        primer_filter = "70"
    }
    //cutadapt parameters 
    cutadapt {
        //Set your forward and reverse primers for cutadapt
        primerF = "GTGCCAGCMGCCGCGGTAA"
        primerR = "GACTACHVHHHTWTCTAAT"
        //Error rate default=0.1
        errorRate = "0.1"
        //Overlap default=(length shortest primer - 1)
        overlap = "18"
    }
    //dada2 parameters
    dada2 {
        //adapt dada2 parameters to fit to your data 
        //trim default=0 (no trimming)
        trim3F = "0"
        trim3R = "0"
        //trunclen : according to the quality plots of your data, set the length of the trimming (0=no initial trimming)
        trunclenF = "0"
        trunclenR = "0"
        //MaxEE error rate allowed for reads ; default 2 
        maxee_f = "2"
        maxee_r = "2"
        //min. quality allowed ; default 2
        minqual = "10"
        //Chimeras : method used to remove chimeras ; choices: 'consensus' (default), 'none' or 'pooled' 
        chimeras = "consensus"
    }
    //taxo parameters
    taxo {
        //extract region from reference database using primers (default but takes time)
        db_seqs = "/PATH-TO/database_seq.qza"
        db_tax = "/PATH-TO/database_taxonomy.qza"
        //to use complete database (faster option) : set extract_db to "no", else set extract_db to "yes" to extract primer region from reference database
        extract_db = "no"
        //pre-formatted databases can be download here: ftp://ftp.ifremer.fr/ifremer/dataref/bioinfo/sebimer/sequence-set/qiime2/2019.07/
        database = "/PATH-TO/database.qza"
        confidence = '0.8'
    }
    // stats parameters
    stats {
        //percentage threshold for exclude rare ASV ; 0 = no filtering
        perc_abund_threshold = "1"
        //According to your metadata file, select the column name corresponding to the variable of interest
        alpha_div_group = "transect_name"
        beta_div_criteria = "site_name"
        hc_method = "ward.D2"
    }
}
